<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520" width="750" height="433"> <style>  } .path-a { opacity: 1;   } .path-a-arrow1 { stroke-dasharray: 80; stroke-dashoffset: 0;   } .path-a-arrow2 { stroke-dasharray: 80; stroke-dashoffset: 0;   } .path-a-arrow3 { stroke-dasharray: 100; stroke-dashoffset: 0;   } .path-a-arrow4 { stroke-dasharray: 60; stroke-dashoffset: 0;   } .path-a-arrow5 { stroke-dasharray: 500; stroke-dashoffset: 0;   } .gate-step1 { opacity: 1;   } .gate-step2 { opacity: 1;   } .gate-step3 { opacity: 1;   } .path-a-db-ok { opacity: 1;   } .path-a-result { opacity: 1;   } .path-b { opacity: 1;   } .path-b-arrow1 { stroke-dasharray: 300; stroke-dashoffset: 0;   } .path-b-step { opacity: 1;   } .path-b-arrow2 { stroke-dasharray: 300; stroke-dashoffset: 0;   } .path-b-label { opacity: 1;   } .path-c { opacity: 1;   } .path-c-arrow1 { stroke-dasharray: 300; stroke-dashoffset: 0;   } .path-c-fail { opacity: 1;   } .path-c-arrow2 { stroke-dasharray: 100; stroke-dashoffset: 0;   } .path-c-comp { opacity: 1;   } .path-c-arrow3 { stroke-dasharray: 80; stroke-dashoffset: 0;   } .path-c-log { opacity: 1;   } .path-c-label { opacity: 1;   } .section-label-a { opacity: 1;   } .section-label-b { opacity: 1;   } .section-label-c { opacity: 1;   }  to { opacity: 1; } }  }  }  }  }  } text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; } .title { font-size: 16px; font-weight: 700; fill: #172B4D; } .subtitle { font-size: 11px; fill: #6B778C; } .box-label { font-size: 12px; font-weight: 600; fill: #FFFFFF; } .box-label-dark { font-size: 12px; font-weight: 600; fill: #172B4D; } .step-text { font-size: 10px; fill: #172B4D; } .arrow-label { font-size: 10px; font-weight: 500; } .section-tag { font-size: 11px; font-weight: 700; } </style> <rect width="750" height="433" fill="#FAFBFC" rx="8"/> <text x="450" y="30" text-anchor="middle" class="title">M1 - ì¿ í° ë°œê¸‰ ìš”ì²­ íë¦„</text> <text x="450" y="46" text-anchor="middle" class="subtitle">Section 2.1 â€” Sequence-style Flow Diagram</text> <g class="path-a"> <circle cx="60" cy="110" r="28" fill="#0052CC" stroke="#003D99" stroke-width="1.5"/> <text x="60" y="106" text-anchor="middle" class="box-label" style="font-size:10px;">ğŸ‘¤</text> <text x="60" y="118" text-anchor="middle" class="box-label" style="font-size:9px;">í´ë¼ì´ì–¸íŠ¸</text> <rect x="140" y="86" width="100" height="48" rx="6" fill="#0052CC" stroke="#003D99" stroke-width="1.5"/> <text x="190" y="114" text-anchor="middle" class="box-label">API ì„œë²„</text> <rect x="300" y="72" width="180" height="76" rx="6" fill="#F4F5F7" stroke="#6554C0" stroke-width="2" stroke-dasharray="6,3"/> <text x="390" y="90" text-anchor="middle" style="font-size:11px; font-weight:600; fill:#6554C0;">Redis gate_keeper</text> <text x="390" y="102" text-anchor="middle" style="font-size:8px; fill:#6554C0;">Lua Atomic</text> <ellipse cx="560" cy="93" rx="35" ry="10" fill="#0052CC" stroke="#003D99" stroke-width="1"/> <rect x="525" y="93" width="70" height="30" fill="#0052CC" stroke="#003D99" stroke-width="1"/> <ellipse cx="560" cy="123" rx="35" ry="10" fill="#0052CC" stroke="#003D99" stroke-width="1"/> <ellipse cx="560" cy="93" rx="35" ry="10" fill="#0065FF"/> <text x="560" y="113" text-anchor="middle" class="box-label" style="font-size:11px;">DB</text> <rect x="660" y="86" width="130" height="48" rx="6" fill="#F4F5F7" stroke="#6554C0" stroke-width="2" stroke-dasharray="6,3"/> <text x="725" y="108" text-anchor="middle" style="font-size:10px; font-weight:600; fill:#6554C0;">Redis compensate</text> <text x="725" y="120" text-anchor="middle" style="font-size:8px; fill:#6554C0;">(ë³´ìƒ ì „ìš©)</text> </g> <line x1="88" y1="110" x2="138" y2="110" stroke="#36B37E" stroke-width="2" marker-end="url(#arrowGreen)" class="path-a-arrow1"/> <line x1="242" y1="110" x2="298" y2="110" stroke="#36B37E" stroke-width="2" marker-end="url(#arrowGreen)" class="path-a-arrow2"/> <g class="gate-step1"><text x="310" y="120" class="step-text" style="fill:#36B37E; font-weight:600;">â‘  SISMEMBER âœ“</text></g> <g class="gate-step2"><text x="310" y="133" class="step-text" style="fill:#36B37E; font-weight:600;">â‘¡ DECR âœ“</text></g> <g class="gate-step3"><text x="310" y="146" class="step-text" style="fill:#36B37E; font-weight:600;">â‘¢ SADD âœ“</text></g> <line x1="482" y1="110" x2="523" y2="110" stroke="#36B37E" stroke-width="2" marker-end="url(#arrowGreen)" class="path-a-arrow3"/> <text x="500" y="103" text-anchor="middle" class="arrow-label path-a-arrow3" style="fill:#36B37E;">INSERT</text> <g class="path-a-db-ok"> <text x="560" y="145" text-anchor="middle" style="font-size:10px; font-weight:700; fill:#36B37E;">âœ“ Committed</text> </g> <path d="M 560 150 L 560 160 L 60 160 L 60 140" stroke="#36B37E" stroke-width="2" fill="none" marker-end="url(#arrowGreen)" class="path-a-arrow5"/> <g class="path-a-result"> <rect x="275" y="150" width="60" height="18" rx="9" fill="#36B37E"/> <text x="305" y="163" text-anchor="middle" style="font-size:9px; font-weight:700; fill:#FFF;">200 OK</text> </g> <g class="section-label-a"> <rect x="10" y="68" width="28" height="16" rx="3" fill="#36B37E"/> <text x="24" y="80" text-anchor="middle" style="font-size:8px; font-weight:700; fill:#FFF;">A</text> <text x="44" y="80" class="section-tag" style="fill:#36B37E;">ì •ìƒ ë°œê¸‰</text> </g> <g class="path-b"> <circle cx="60" cy="250" r="22" fill="#F4F5F7" stroke="#FF5630" stroke-width="1.5"/> <text x="60" y="254" text-anchor="middle" style="font-size:10px; fill:#FF5630;">ğŸ‘¤</text> <rect x="300" y="228" width="180" height="48" rx="6" fill="#FFF0F0" stroke="#FF5630" stroke-width="1.5" stroke-dasharray="6,3"/> <text x="390" y="246" text-anchor="middle" style="font-size:10px; font-weight:600; fill:#FF5630;">Redis gate_keeper</text> </g> <line x1="84" y1="250" x2="298" y2="250" stroke="#FF5630" stroke-width="2" stroke-dasharray="8,4" marker-end="url(#arrowRed)" class="path-b-arrow1"/> <g class="path-b-step"> <text x="310" y="268" class="step-text" style="fill:#FF5630; font-weight:600;">â‘  SISMEMBER âœ— (ì¤‘ë³µ)</text> </g> <path d="M 300 270 L 160 270 L 84 270" stroke="#FF5630" stroke-width="2" stroke-dasharray="8,4" fill="none" marker-end="url(#arrowRed)" class="path-b-arrow2"/> <g class="path-b-label"> <rect x="140" y="276" width="100" height="16" rx="3" fill="#FF5630"/> <text x="190" y="288" text-anchor="middle" style="font-size:9px; font-weight:700; fill:#FFF;">BLOCKED</text> <text x="500" y="260" text-anchor="middle" style="font-size:10px; fill:#6B778C; font-style:italic;">ë¶ˆí•„ìš” DB ì ‘ê·¼ ì°¨ë‹¨</text> </g> <g class="section-label-b"> <rect x="10" y="225" width="28" height="16" rx="3" fill="#FF5630"/> <text x="24" y="237" text-anchor="middle" style="font-size:8px; font-weight:700; fill:#FFF;">B</text> <text x="44" y="237" class="section-tag" style="fill:#FF5630;">ì¤‘ë³µ/ì¬ê³ ì†Œì§„ ì°¨ë‹¨</text> </g> <g class="path-c"> <rect x="300" y="330" width="120" height="36" rx="6" fill="#F4F5F7" stroke="#6554C0" stroke-width="1.5" stroke-dasharray="6,3"/> <text x="360" y="352" text-anchor="middle" style="font-size:10px; font-weight:600; fill:#6554C0;">gate_keeper âœ“</text> <ellipse cx="530" cy="338" rx="30" ry="8" fill="#FF5630" stroke="#DE350B" stroke-width="1"/> <rect x="500" y="338" width="60" height="22" fill="#FF5630" stroke="#DE350B" stroke-width="1"/> <ellipse cx="530" cy="360" rx="30" ry="8" fill="#FF5630" stroke="#DE350B" stroke-width="1"/> <ellipse cx="530" cy="338" rx="30" ry="8" fill="#FF7452"/> <text x="530" y="354" text-anchor="middle" style="font-size:10px; font-weight:700; fill:#FFF;">DB</text> </g> <line x1="422" y1="348" x2="498" y2="348" stroke="#FFAB00" stroke-width="2" marker-end="url(#arrowAmber)" class="path-c-arrow1"/> <g class="path-c-fail"> <text x="530" y="380" text-anchor="middle" style="font-size:10px; font-weight:700; fill:#FF5630;">âœ— ì‹¤íŒ¨</text> </g> <g class="path-c-arrow2"> <path d="M 530 382 L 530 400 L 700 400" stroke="#FFAB00" stroke-width="2" fill="none" marker-end="url(#arrowAmber)"/> <text x="610" y="395" text-anchor="middle" class="arrow-label" style="fill:#FFAB00;">ë³´ìƒ íŠ¸ëœì­ì…˜</text> </g> <g class="path-c-comp"> <rect x="700" y="382" width="150" height="50" rx="6" fill="#FFF8E6" stroke="#FFAB00" stroke-width="2" stroke-dasharray="6,3"/> <text x="775" y="402" text-anchor="middle" style="font-size:10px; font-weight:600; fill:#FFAB00;">Redis compensate</text> <text x="775" y="418" text-anchor="middle" style="font-size:10px; font-weight:700; fill:#172B4D;">INCR + SREM + DEL</text> </g> <line x1="775" y1="434" x2="775" y2="470" stroke="#FFAB00" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrowAmber)" class="path-c-arrow3"/> <g class="path-c-log"> <rect x="700" y="470" width="150" height="36" rx="6" fill="#FFF0E6" stroke="#FFAB00" stroke-width="1.5"/> <text x="775" y="488" text-anchor="middle" style="font-size:9px; font-weight:600; fill:#172B4D;">t_compensation_log</text> <text x="775" y="500" text-anchor="middle" style="font-size:8px; fill:#6B778C;">ğŸ”„ ì¬ì‹œë„ ì˜ˆì•½</text> <text x="695" y="460" text-anchor="end" style="font-size:8px; fill:#FF5630; font-style:italic;">ë³´ìƒ ì‹¤íŒ¨ ì‹œ</text> </g> <g class="section-label-c"> <rect x="10" y="330" width="28" height="16" rx="3" fill="#FFAB00"/> <text x="24" y="342" text-anchor="middle" style="font-size:8px; font-weight:700; fill:#172B4D;">C</text> <text x="44" y="342" class="section-tag" style="fill:#FFAB00;">DB ì‹¤íŒ¨ ë³´ìƒ</text> </g> <defs> <marker id="arrowGreen" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"> <path d="M0,0 L8,3 L0,6 Z" fill="#36B37E"/> </marker> <marker id="arrowRed" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"> <path d="M0,0 L8,3 L0,6 Z" fill="#FF5630"/> </marker> <marker id="arrowAmber" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"> <path d="M0,0 L8,3 L0,6 Z" fill="#FFAB00"/> </marker> </defs> </svg>