<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 350" width="750" height="292"> <style>  .stage-box { fill-opacity: 1 !important; } } .font-base { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; } .title { font-size: 16px; font-weight: 700; fill: #172B4D; } .stage-num { font-size: 14px; font-weight: 700; fill: white; } .stage-title { font-size: 12px; font-weight: 700; fill: white; } .stage-sub { font-size: 10px; fill: rgba(255,255,255,0.9); } .gate-text { font-size: 9px; fill: #6B778C; font-style: italic; } .arrow { fill: none; stroke: #B3BAC5; stroke-width: 2; marker-end: url(#arrowGray); } .fail-text { font-size: 10px; fill: #FF5630; font-weight: 600; } .fail-sub { font-size: 9px; fill: #6B778C; } .check { font-size: 12px; fill: #36B37E; font-weight: 700; } .stage-animate { opacity: 1;  }      .gate-animate { opacity: 1;  }     .fail-animate { opacity: 1;  }    to { opacity: 1; } } </style> <defs> <marker id="arrowGray" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6 Z" fill="#B3BAC5"/></marker> <marker id="arrowRed2" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6 Z" fill="#FF5630"/></marker> <filter id="shadow"><feDropShadow dx="0" dy="1" stdDeviation="2" flood-opacity="0.15"/></filter> </defs> <text x="450" y="24" text-anchor="middle" class="font-base title">인덱스 삭제 5단계 파이프라인</text> <g class="stage-animate s1"> <rect x="20" y="50" width="140" height="80" rx="10" fill="#6554C0" filter="url(#shadow)"/> <circle cx="40" cy="66" r="11" fill="rgba(255,255,255,0.3)"/> <text x="40" y="70" text-anchor="middle" class="font-base stage-num">1</text> <text x="90" y="70" text-anchor="middle" class="font-base stage-title">후보 식별</text> <text x="90" y="88" text-anchor="middle" class="font-base stage-sub">pg_stat_user_indexes</text> <line x1="35" y1="100" x2="145" y2="100" stroke="rgba(255,255,255,0.3)" stroke-width="1"/> <text x="90" y="118" text-anchor="middle" class="font-base" style="font-size:9px;fill:rgba(255,255,255,0.7)">idx_scan &lt; N</text> </g> <g class="gate-animate g1"> <line x1="160" y1="90" x2="185" y2="90" class="arrow"/> <text x="172" y="82" text-anchor="middle" class="font-base check">✓</text> </g> <g class="stage-animate s2"> <rect x="185" y="50" width="140" height="80" rx="10" fill="#0052CC" filter="url(#shadow)"/> <circle cx="205" cy="66" r="11" fill="rgba(255,255,255,0.3)"/> <text x="205" y="70" text-anchor="middle" class="font-base stage-num">2</text> <text x="255" y="70" text-anchor="middle" class="font-base stage-title">사용처 확인</text> <text x="255" y="88" text-anchor="middle" class="font-base stage-sub">호출 경로 매핑</text> <line x1="200" y1="100" x2="310" y2="100" stroke="rgba(255,255,255,0.3)" stroke-width="1"/> <text x="255" y="118" text-anchor="middle" class="font-base" style="font-size:9px;fill:rgba(255,255,255,0.7)">의존성 = 0</text> </g> <g class="gate-animate g2"> <line x1="325" y1="90" x2="350" y2="90" class="arrow"/> <text x="337" y="82" text-anchor="middle" class="font-base check">✓</text> </g> <g class="stage-animate s3"> <rect x="350" y="50" width="140" height="80" rx="10" fill="#0052CC" filter="url(#shadow)"/> <circle cx="370" cy="66" r="11" fill="rgba(255,255,255,0.3)"/> <text x="370" y="70" text-anchor="middle" class="font-base stage-num">3</text> <text x="420" y="70" text-anchor="middle" class="font-base stage-title">대체 수단 마련</text> <text x="420" y="88" text-anchor="middle" class="font-base stage-sub">EXPLAIN ANALYZE</text> <line x1="365" y1="100" x2="475" y2="100" stroke="rgba(255,255,255,0.3)" stroke-width="1"/> <text x="420" y="118" text-anchor="middle" class="font-base" style="font-size:9px;fill:rgba(255,255,255,0.7)">대체 경로 확인</text> </g> <g class="gate-animate g3"> <line x1="490" y1="90" x2="515" y2="90" class="arrow"/> <text x="502" y="82" text-anchor="middle" class="font-base check">✓</text> </g> <g class="stage-animate s4"> <rect x="515" y="50" width="155" height="80" rx="10" fill="#FFAB00" filter="url(#shadow)"/> <circle cx="535" cy="66" r="11" fill="rgba(255,255,255,0.3)"/> <text x="535" y="70" text-anchor="middle" class="font-base stage-num">4</text> <text x="592" y="70" text-anchor="middle" class="font-base stage-title">무중단 삭제</text> <text x="592" y="86" text-anchor="middle" class="font-base stage-sub" style="font-size:9px">DROP INDEX</text> <text x="592" y="96" text-anchor="middle" class="font-base stage-sub" style="font-size:9px">CONCURRENTLY</text> <line x1="530" y1="104" x2="655" y2="104" stroke="rgba(255,255,255,0.3)" stroke-width="1"/> <text x="592" y="120" text-anchor="middle" class="font-base" style="font-size:9px;fill:rgba(255,255,255,0.7)">24h 안정</text> </g> <g class="gate-animate g4"> <line x1="670" y1="90" x2="695" y2="90" class="arrow"/> <text x="682" y="82" text-anchor="middle" class="font-base check">✓</text> </g> <g class="stage-animate s5"> <rect x="695" y="50" width="140" height="80" rx="10" fill="#36B37E" filter="url(#shadow)"/> <circle cx="715" cy="66" r="11" fill="rgba(255,255,255,0.3)"/> <text x="715" y="70" text-anchor="middle" class="font-base stage-num">5</text> <text x="765" y="70" text-anchor="middle" class="font-base stage-title">삭제 후 검증</text> <text x="765" y="88" text-anchor="middle" class="font-base stage-sub">24h 모니터링</text> <line x1="710" y1="100" x2="820" y2="100" stroke="rgba(255,255,255,0.3)" stroke-width="1"/> <text x="765" y="118" text-anchor="middle" class="font-base" style="font-size:9px;fill:rgba(255,255,255,0.7)">정상 확인</text> </g> <g class="fail-animate f1"> <line x1="592" y1="130" x2="592" y2="170" stroke="#FF5630" stroke-width="1.5" marker-end="url(#arrowRed2)"/> <rect x="520" y="175" width="145" height="46" rx="6" fill="#FFEBE6" stroke="#FF5630" stroke-width="1.5"/> <text x="592" y="193" text-anchor="middle" class="font-base fail-text">실패 → INVALID 상태</text> <text x="592" y="213" text-anchor="middle" class="font-base fail-sub">재시도 또는 복구</text> <path d="M520,198 Q470,198 470,155 Q470,90 515,90" fill="none" stroke="#FF5630" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrowRed2)"/> </g> <g class="fail-animate f2"> <line x1="765" y1="130" x2="765" y2="170" stroke="#FF5630" stroke-width="1.5" marker-end="url(#arrowRed2)"/> <rect x="680" y="175" width="170" height="46" rx="6" fill="#FFEBE6" stroke="#FF5630" stroke-width="1.5"/> <text x="765" y="193" text-anchor="middle" class="font-base fail-text">문제 발견</text> <text x="765" y="213" text-anchor="middle" class="font-base fail-sub" style="font-size:8.5px">CREATE INDEX CONCURRENTLY 복구</text> </g> <g transform="translate(20,270)"> <rect x="0" y="0" width="860" height="50" rx="6" fill="#F4F5F7" stroke="#DFE1E6" stroke-width="1"/> <text x="15" y="18" class="font-base" style="font-size:10px;fill:#6B778C;font-weight:600">범례:</text> <rect x="15" y="26" width="14" height="14" rx="3" fill="#6554C0"/> <text x="34" y="37" class="font-base" style="font-size:10px;fill:#172B4D">식별</text> <rect x="75" y="26" width="14" height="14" rx="3" fill="#0052CC"/> <text x="94" y="37" class="font-base" style="font-size:10px;fill:#172B4D">분석/준비</text> <rect x="160" y="26" width="14" height="14" rx="3" fill="#FFAB00"/> <text x="179" y="37" class="font-base" style="font-size:10px;fill:#172B4D">실행 (주의)</text> <rect x="255" y="26" width="14" height="14" rx="3" fill="#36B37E"/> <text x="274" y="37" class="font-base" style="font-size:10px;fill:#172B4D">완료/검증</text> <rect x="345" y="26" width="14" height="14" rx="3" fill="#FFEBE6" stroke="#FF5630" stroke-width="1"/> <text x="364" y="37" class="font-base" style="font-size:10px;fill:#FF5630">실패 경로</text> <text x="450" y="37" class="font-base" style="font-size:10px;fill:#6B778C">각 단계의 게이트 조건을 충족해야 다음 단계로 진행</text> </g> </svg>